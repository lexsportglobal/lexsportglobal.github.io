<div id="playerModal" class="modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <div id="modalDetails">
            </div>
    </div>
</div>

<style>
/* Fen√™tre de fond */
.modal {
    display: none; 
    position: fixed;
    z-index: 9999;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.85);
    backdrop-filter: blur(8px);
}

/* Bo√Æte de dialogue */
.modal-content {
    background-color: #121212;
    margin: 10% auto;
    padding: 30px;
    border: 1px solid #D4AF37;
    width: 90%;
    max-width: 500px;
    border-radius: 20px;
    position: relative;
    color: white;
    box-shadow: 0 0 40px rgba(212, 175, 55, 0.15);
}

/* Bouton fermer */
.close-modal {
    position: absolute;
    right: 20px;
    top: 15px;
    color: #D4AF37;
    font-size: 30px;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
}

.close-modal:hover { color: white; }

/* Styles internes de la fiche */
.modal-body h2 { color: #D4AF37; font-size: 1.8em; margin-bottom: 5px; text-transform: uppercase; }
.modal-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 25px; }
.info-box { border-bottom: 1px solid #333; padding-bottom: 8px; }
.info-box label { display: block; color: #D4AF37; font-size: 10px; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 4px; }
.info-box span { font-size: 15px; font-weight: 500; }
.scout-box { margin-top: 30px; padding: 15px; background: rgba(212, 175, 55, 0.05); border-left: 4px solid #D4AF37; border-radius: 4px; }
.scout-box label { color: #D4AF37; font-weight: bold; display: block; margin-bottom: 8px; font-size: 12px; }
.scout-box p { font-style: italic; font-size: 14px; line-height: 1.6; color: #eee; margin: 0; }

	/* Style des badges */
.player-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 10px;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 1px;
    z-index: 2;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
}

/* Variantes de couleurs */
.status-pro { background-color: #D4AF37; color: #000; }
.status-free { background-color: #000; color: #D4AF37; border: 1px solid #D4AF37; }
.status-amateur { background-color: #444; color: #fff; }

/* On s'assure que la carte est le point de rep√®re du badge */
.player-card { position: relative; }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // --- CONFIGURATION ---
    const supabaseUrl = 'TON_URL_SUPABASE'; // <--- REMPLACE ICI
    const supabaseKey = 'TA_CLE_ANON_SUPABASE'; // <--- REMPLACE ICI
    
    <!DOCTYPE HTML>
<html>
	<head>
		<title>Data Scouting - LEX SPORT GLOBAL</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<style>
			/* Optimisation de l'image et du texte */
			.image.main img {
				max-height: 400px;
				object-fit: cover;
				border-bottom: 3px solid #C5A05F;
			}
			.bilingual-grid {
				display: flex;
				gap: 40px;
				margin-top: 30px;
			}
			.lang-box {
				flex: 1;
				padding: 20px;
				line-height: 1.8;
			}
			.lang-box h2 {
				font-size: 1.5em;
				margin-bottom: 1em;
			}
			.lang-box p {
				font-size: 1.1em;
				text-align: justify;
			}
			@media screen and (max-width: 736px) {
				.bilingual-grid { flex-direction: column; }
			}

			/* --- STYLE CARTES JOUEURS --- */
			:root {
				--gold: #D4AF37;
				--dark: #1a1a1a;
				--white: #ffffff;
			}

			#players-container {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
				gap: 25px;
				padding: 20px;
				background-color: #0f0f0f;
				margin-top: 30px;
			}

			.player-card {
				background: linear-gradient(145deg, #232323, #1a1a1a);
				border: 1px solid var(--gold);
				border-radius: 15px;
				padding: 20px;
				text-align: center;
				color: var(--white);
				transition: transform 0.3s ease, box-shadow 0.3s ease;
				font-family: 'Segoe UI', sans-serif;
			}

			.player-card:hover {
				transform: translateY(-10px);
				box-shadow: 0 10px 20px rgba(212, 175, 55, 0.4);
			}

			.player-card img {
				width: 120px;
				height: 120px;
				border-radius: 50%;
				border: 3px solid var(--gold);
				object-fit: cover;
				margin-bottom: 15px;
				background: #333;
			}

			.player-card h3 {
				color: var(--gold);
				text-transform: uppercase;
				letter-spacing: 1px;
				margin: 10px 0;
			}

			.player-card .stats {
				background: rgba(212, 175, 55, 0.1);
				padding: 10px;
				border-radius: 8px;
				font-size: 0.9em;
				margin-bottom: 20px;
			}

			.player-card button {
				background-color: var(--gold) !important;
				color: #000000 !important;
				border: 2px solid #000000 !important;
				display: flex !important;
				justify-content: center !important;
				align-items: center !important;
				height: 45px !important;
				padding: 0 20px !important;
				border-radius: 8px !important;
				font-weight: 900 !important;
				font-size: 13px !important;
				cursor: pointer;
				text-transform: uppercase !important;
				width: 100%;
				transition: all 0.3s ease;
			}

			.player-card button:hover {
				background-color: #000000 !important;
				color: var(--gold) !important;
				border: 2px solid var(--gold) !important;
			}

			/* --- STYLE MODALE --- */
			.modal {
				display: none; 
				position: fixed;
				z-index: 9999;
				left: 0;
				top: 0;
				width: 100%;
				height: 100%;
				background-color: rgba(0,0,0,0.9);
				backdrop-filter: blur(5px);
			}

			.modal-content {
				background-color: #1a1a1a;
				margin: 5% auto;
				padding: 30px;
				border: 1px solid var(--gold);
				width: 90%;
				max-width: 500px;
				border-radius: 15px;
				color: white;
				position: relative;
			}

			.close-modal {
				position: absolute;
				right: 20px;
				top: 10px;
				color: var(--gold);
				font-size: 35px;
				font-weight: bold;
				cursor: pointer;
			}

			.modal-info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
			.info-item { border-bottom: 1px solid #333; padding-bottom: 5px; }
			.info-item label { display: block; color: var(--gold); font-size: 0.7em; text-transform: uppercase; }
		</style>
	</head>
	<body class="is-preload">
		<div id="wrapper">
			<div id="main">
				<div class="inner">
					<header id="header">
						<a href="index.html" class="logo">
							<img src="images/logo_final.jpg" alt="Logo" style="height: 30px; vertical-align: middle; margin-right: 10px;" />
							<strong>LEX SPORT GLOBAL</strong> | Performance & Analytics
						</a>
						<ul class="icons">
							<li><a href="https://www.linkedin.com/company/lexsportglobal/" class="icon brands fa-linkedin-in"><span class="label">LinkedIn</span></a></li>
							<li><a href="mailto:lexsportglobal.contact@gmail.com" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
							<li><a href="https://wa.me/22997328579" class="icon brands fa-whatsapp"><span class="label">WhatsApp</span></a></li>
						</ul>
					</header>

					<section>
						<header class="main">
							<h1 style="color: #002349; letter-spacing: 2px;">Data Scouting & Performance</h1>
						</header>
						<span class="image main"><img src="images/scouting_data.jpg" alt="Data Analytics" /></span>

						<div class="bilingual-grid">
							<div class="lang-box" style="border-right: 1px solid #eeeeee;">
								<h2 style="color: #C5A05F;">[FR] Analyse Pr√©dictive</h2>
								<p>Le d√©partement <strong>Data Scouting</strong> de Lex Sport Global accompagne les clubs dans l'identification de talents via des KPIs mondiaux.</p>
							</div>
							<div class="lang-box">
								<h2 style="color: #C5A05F;">[EN] Predictive Analytics</h2>
								<p>Lex Sport Global's <strong>Data Scouting</strong> assist clubs in identifying talent through global KPIs benchmarks.</p>
							</div>
						</div>
					</section>

					<div id="players-container"></div>

					<ul class="actions" style="margin-top: 50px;">
						<li><a href="index.html" class="button primary big">Retour √† l'accueil / Back Home</a></li>
					</ul>
				</div>
			</div>
		</div>

		<div id="playerModal" class="modal">
			<div class="modal-content">
				<span class="close-modal">&times;</span>
				<div id="modalDetails"></div>
			</div>
		</div>

		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

		<script>
			document.addEventListener('DOMContentLoaded', function() {
				let allPlayers = [];
				const supabaseUrl = 'https://kjhrikutzxixmvmhbjqk.supabase.co';
				const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtqaHJpa3V0enhpeG12bWhianFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEyNzg4NzQsImV4cCI6MjA4Njg1NDg3NH0.df9_4U08BN-NPNaXYXsyWTkSZqoNT7UtF_Iz8lx6HZo';

				async function fetchPlayers() {
					try {
						const response = await fetch(`${supabaseUrl}/rest/v1/players?select=*`, {
							headers: { 'apikey': supabaseKey, 'Authorization': `Bearer ${supabaseKey}` }
						});
						allPlayers = await response.json();
						displayPlayers(allPlayers);
					} catch (error) { console.error("Erreur Supabase:", error); }
				}

				function displayPlayers(players) {
					const container = document.getElementById('players-container');
					container.innerHTML = '';
					players.forEach((player, index) => {
    // D√©terminer la classe du badge selon le statut dans ta base
    let statusClass = 'status-amateur'; 
    let statusLabel = player.status || 'Amateur';

    if (statusLabel.toLowerCase() === 'pro') statusClass = 'status-pro';
    if (statusLabel.toLowerCase() === 'ind√©pendant' || statusLabel.toLowerCase() === 'free') {
        statusClass = 'status-free';
        statusLabel = 'Free Agent';
    }
						
						container.innerHTML += `
        <div class="player-card">
            <div class="player-badge ${statusClass}">${statusLabel}</div>
            
            <img src="${player.photo_url || 'https://via.placeholder.com/150'}" alt="${player.full_name}">
            <h3>${player.full_name}</h3>
            <p class="position">üìç ${player.position || 'N/A'}</p>
            <div class="stats">
               ‚öΩ Buts: ${player.Buts || 0} | üëü Assists: ${player.Assists || 0}
            </div>
            <button onclick="showDetails(${index})">VIEW PROFILE</button>
        </div>
    `;
});

				window.showDetails = function(index) {
					const player = allPlayers[index];
					const modal = document.getElementById("playerModal");
					const details = document.getElementById("modalDetails");
					details.innerHTML = `
						<div class="modal-body">
							<h2 style="color: #D4AF37; text-transform:uppercase;">${player.full_name}</h2>
							<p>üìç ${player.position} | ${player.nationality}</p>
							<div class="modal-info-grid">
								<div class="info-item"><label>PIED</label> ${player.preferred_foot || 'N/A'}</div>
								<div class="info-item"><label>VALEUR</label> ${player.market_value || 'N/A'}</div>
								<div class="info-item"><label>CONTRAT</label> ${player.contract_end || 'N/A'}</div>
								<div class="info-item"><label>TAILLE</label> ${player.height || 'N/A'}</div>
							</div>
							<div style="margin-top:20px; padding:15px; border-left:3px solid #D4AF37; background:#222; font-style:italic;">
								<strong style="color:#D4AF37; font-style:normal; font-size:0.8em;">SCOUT REPORT:</strong><br>
								"${player.scout_comment || 'Analyse en cours...'}"
							</div>
						</div>
					`;
					modal.style.display = "block";
				};

				const modal = document.getElementById("playerModal");
				const closeBtn = document.querySelector(".close-modal");
				if(closeBtn) {
					closeBtn.onclick = () => modal.style.display = "none";
				}
				window.onclick = (event) => {
					if (event.target == modal) modal.style.display = "none";
				};

				fetchPlayers();
			});
		</script>
	</body>

</html>

